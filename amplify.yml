version: 1
frontend:
  phases:
    preBuild:
      commands:
        - yum install -y amazon-linux-extras || true
        - amazon-linux-extras install -y epel || true
        - yum install -y git-lfs || curl -s https://github.com/git-lfs/git-lfs/releases/download/v3.4.0/git-lfs-linux-amd64-v3.4.0.tar.gz | tar xz && ./git-lfs-3.4.0/install.sh
        - git lfs install
        - git lfs pull
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist/portfolio/browser
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
customHeaders:
  - pattern: '**/*.mp4'
    headers:
      - key: Content-Type
        value: video/mp4
